[releasenotes-2016]
=== OpenNMS Meridian 2016

[releasenotes-whatsnew-2016]
==== What's New in Meridian 2016

Since Meridian 2015, a number of backend changes have been made, as well as a large amount of refactoring and many new features.

===== Java 8

Meridian 2015 dropped support for Java 6, and now in 2016 we are dropping support for Java 7, which has been EOL'd for some time now.
OpenNMS Meridian 2015 requires Java 8 to run, and we strongly recommend the latest version of Oracle JDK 8 for your platform.

===== PostgreSQL 9.1 or Higher

OpenNMS Meridian 2016 now requires PostgreSQL 9.1 or higher. All older versions of PostgreSQL are past their end-of-life support date.

===== Retired Features

* The legacy capability scanner, Capsd, has been removed from OpenNMS. It was deprecated in OpenNMS Horizon 1.12 and disabled by default
  in Horizon 14 and Meridian 2015 in favor of the provisioning systems of OpenNMS.
* The original link scanning daemon, Linkd, has been superseded by Enhanced Linkd since it was introduced in OpenNMS Horizon 15.
  Enhanced Linkd is a refactored replacement that is more efficient than the original Linkd code.
* *SVG Maps*: The SVG map feature relied on Linkd's code for drawing links between items on the map so it was also removed in OpenNMS 17.
* *Xmlrpcd*: Xmlrpcd was a daemon that relayed inventory and polling events to an external system over the XML-RPC protocol. Because you can
  accomplish almost all of its use cases by using the provisioning REST service, it has been removed.
* *MX4J*: The MX4J HTTP interface has been removed in favor of using more modern JMX access methods that have been added in recent versions
  of the JVM.

===== Important Upgrade Notes

* *Clean Up Events and Alarms*: Please clean up your event and alarm lists as much as possible before performing an upgrade to Meridian 2016.
  The upgrade process contains a large number of database schema migrations which will cause rewrites of all of the data in some tables.
  If you prune unused data from these tables beforehand, it will make the upgrade process much quicker.
* *Remote Poller API Change*: Due to internal API changes, the Remote Poller API has changed in Meridian 2016.
  If you upgrade to Meridian 2016, you will also need to upgrade all Remote Pollers attached to the system to 2016 as well.
* *RMI Security Updates*: The RMI registry has been changed to only listen on localhost by default.  It also now requires authentication
  using an OpenNMS administrator account.
* *JMX Updates*: JMX is no longer enabled by default on port 18980.
  If you have reason to access your OpenNMS instance remotely over JMX, you can reenable it by adding `-Dcom.sun.management.jmxremote.port=18980`
  and `-Dcom.sun.management.jmxremote.ssl=false` to `ADDITIONAL_MANAGER_OPTIONS` in `$OPENNMS_HOME/etc/opennms.conf`.  Complete documentation
  on enabling remote access and configuring authentication is available in the admin guide.
  Note that OpenNMS-JVM monitoring of the local instance (ie, localhost) will still work by using the JMX Access API, without needing to
  enable the TCP port.

===== API Changes

Several classes changed location in Meridian 2016 and these changes may require you to update configuration files or scripts with the new names.

* The *IndexStorageStrategy* and *PersistAllSelectorStrategy* classes moved into the *org.opennms.netmgt.collection.support* Java package. These classes
  are heavily referenced in data collection configuration files. There is an upgrade task that should update all data collection files when you
  run the *install* command after upgrading OpenNMS.
* All *EventUtils* class methods were consolidated inside the *org.opennms.netmgt.model.events.EventUtils* class.
* Monitoring locations for the Remote Poller are now viewed and configured in the UI under `/locations/index.jsp`.
  Monitoring locations were previously configured in the `etc/monitoring-locations.xml` file but are now stored in `monitoringlocations` database table.
* All data previously in the `location_monitors` table is now in the `monitoringsystems` table.
* The `ifIndex` column has been removed from the `ipInterface` table.
  To fetch the ifIndex, you need to join to the `snmpInterface` table by `nodeId`.
* The `nodeId` and `ipAddr` columns have been removed from the `ifServices` table.
  To fetch these columns, you need to join to the `ipInterface` table.
* The `nodeId`, `ipAddr` and `serviceId` columns have been removed from the `outages` table.
  To fetch these columns, you need to join to the `ifServices` table.

===== New Features

* There is a new REST service that can be used to export performance data. This service can be used to easily export OpenNMS metrics into external
  graphing engines such as Grafana. See the REST API documentation for details.
* *Newts Storage for Data Collection*: In addition to RRD and JRobin, OpenNMS 17 data collection now supports our [Newts](http://opennms.github.io/newts/) time-series data store that uses the highly-scalable Apache Cassandra database as the storage backend.
  This storage solution provides higher performance than the file-based RRD and JRobin databases and practically unlimited scalability when using a cluster of Cassandra nodes.
  You can drastically reduce CPU and storage load on your OpenNMS system and increase the number of metrics stored per second by using the Newts storage engine.
* *Measurements REST API Filtering*: The measurements REST API now supports the use of arithmetic filters on the returned datasets.
  This allows you to perform calculations or statistical operations on the data via server-side processing.
* *Grafana Panel*: An optional panel has been added to the UI to allow you to integrate links to Grafana graphs in the UI.
* *Streamlined UI Style*: The style of the UI has been refined to provide a clearer, more modern look-and-feel.
* *Alarm Heatmap*: A heatmap visualization has been added that lets you quickly visualize alarm status and outages within a category or on a node.
* *FreeIPA Kerberos Authentication*: We've added a sample configuration for FreeIPA Kerberos SSO to our `jetty-webapps/opennms/WEB-INF/spring-security.d` directory.
* *JMX Configuration UI and CLI*: The JMX Configuration web UI and CLI have been rewritten to make it easier to generate complex JMX data collection configurations.
* *JMS Alarm Northbounder*: The implementation of a JMS northbounder for sending OpenNMS Alarms to external JMS listeners has been completed. Thanks to David Schlenk (@dschlenk) for this contribution!
* *OTRS 3.1+ Ticketing Integration*: Our OTRS ticketing integration has been updated to work with the API in OTRS 3.1 and higher. Thanks to Jonathan Sartin (@blackpoplar) for this contribution!
* *Easier Remote Poller Configuration*: Monitoring locations can now be associated with multiple polling and collection packages. This can make some Remote Poller scenarios easier to configure.

===== Events

New or updated trap definitions have been added for the following classes of devices:

* A10 AX Load Balancer
* Avocent DSView
* Citrix NetScaler
* Dell Force 10
* Evertz 7800FR Multiframe
  * 7880-IP-ASI-IP
  * 7881-DEC-MP2
  * 7780-ASI-IP2
* Infoblox
* Mikrotik RouterOS
* ~50 new NetApp Events
* OpenSSH syslog events
* Postfix syslog events
* Procmail syslog events
* Raytheon NXU-2A
* Siemens HiPath
* Veeam Backup/Replication

===== Data Collection

* Fortinet Fortigate
* Sonicwall

===== Core Updates

As always, many updates and cleanups have been made to the OpenNMS core, through refactoring,
addition of unit tests, and other code modernization.

* A few subsystems have been updated to run properly under OSGi.
* A large number of places where we were still using JDBC calls have been converted to use our DAO infrastructure and Hibernate.
* The OpenNMS ReST APIs now support CORS properly to aid in writing web applications that consume or update OpenNMS data.
* The JMX detector, monitor, and collector were refactored for modularity.
* The Dashboard was rewritten using the Vaadin UI toolkit to improve and modernize its look-and-feel.
* Bean Scripting Framework (BSF) notifications and the BSFMonitor were optimized and are now much more efficient. (Thanks to David Schlenk for this contribution!)
* RTC, which calculates the availability percentages for the category panel on the main page, was rewritten using Spring for initialization and
  using database calls to perform availability calculations. This will improve its maintainability.
* The web controllers for provisioning, RANCID integration, reports, the node list, and Remote Poller administration were rewritten
  to modernize their code.
* The REST portion of the OpenNMS webapp was modularized into its own project.
* The REST interface has been refactored to be based on Apache CXF 3.1.4.
* The web UI service layer was separated from the main web UI to improve modularity.
* The Jasper and statsd reports have been changed so that they use a new unified interface for fetching data from either RRD, JRobin, or Newts.
* The Discovery engine has been refactored into its own project.
* The Dashboard has been rewritten using the Vaadin toolkit to modernize its look-and-feel.
* The `opennms-assemblies/jmx-config-generator-onejar` project has been moved to `features/jmx-config-generator`.

===== Dependency Updates

A number of internal libraries have been upgraded for bugfixes and new features. None of these updates should require configuration changes.

* Spring has been upgraded from 3.2.9 to 4.0.5.
* Spring Security has been upgraded from 3.1.7 to 3.2.7.
* Drools has been upgraded from 5.1.1 to 6.0.1.
* Apache Camel has been upgraded from 2.13.2 to 2.14.1.
* Smack (used for XMPP notifications) has been upgraded from 3.0.4 to 4.0.6.
* The webapp schemas have all been updated to the Servlet 3.0 specification.
* Jasper Reports has been upgraded from 5.6.1 to 6.1.1.

[releasenotes-changelog-Meridian-2016.1.21]

==== Release Meridian-2016.1.21

Release 2016.1.21 is a small update to 2016.1.20 that has a few UI fixes and security updates, as well as a fix for a memory leak
in WS-Man monitoring.

The codename for 2016.1.21 is _North Pole Gnomonic_.

===== Bug

* Node detail page renders with no content when invalid node ID specified (Issue http://issues.opennms.org/browse/NMS-10679[NMS-10679])
* CVE-2018-20433: XXE Vulnerability in c3p0 < 0.9.5.3 (Issue http://issues.opennms.org/browse/NMS-10694[NMS-10694])
* Memory leak in WS-Man (Issue http://issues.opennms.org/browse/NMS-10696[NMS-10696])
* Reflected XSS vulnerability in notification/detail.jsp and outage/detail.htm (Issue http://issues.opennms.org/browse/NMS-10707[NMS-10707])

[releasenotes-changelog-Meridian-2016.1.20]

==== Release Meridian-2016.1.20

Release 2016.1.20 is a small update to 2016.1.19 that has a few changes including UI updates and an SNMP loop bug that could cause out-of-memory crashes.

The codename for 2016.1.20 is _Craster Parabolic_.

===== Bug

* `find-java.sh` doesn't understand newer JDK output (Issue http://issues.opennms.org/browse/NMS-10401[NMS-10401])
* Backport SNMP successor validation (Issue http://issues.opennms.org/browse/NMS-10622[NMS-10622])
* When editing a surveillance category from Admin flow, lists of nodes are not sorted by node label (Issue http://issues.opennms.org/browse/NMS-10654[NMS-10654])
* Karaf shell history thrown out with bathwater on upgrade (Issue http://issues.opennms.org/browse/NMS-10664[NMS-10664])

===== Enhancement

* "Event text contains" should search beyond eventlogmsg (Issue http://issues.opennms.org/browse/NMS-8444[NMS-8444])

[releasenotes-changelog-Meridian-2016.1.19]

==== Release Meridian-2016.1.19

Release 2016.1.19 is a small update to 2016.1.18 that fixes a performance issue in the measurements API.

The codename for 2016.1.19 is _Mollweide_.

===== Bug

* Poor performance when using filters in the Measurements API (Issue http://issues.opennms.org/browse/NMS-10589[NMS-10589])
* Update webapp copyright dates to 2019 (Issue http://issues.opennms.org/browse/NMS-10591[NMS-10591])

[releasenotes-changelog-Meridian-2016.1.18]

==== Release Meridian-2016.1.18

Release 2016.1.18 is a small update to 2016.1.17 that provides a few documentation updates, a query bug fix,
and a fix for an issue with notifications being sent when there is no associated node.

The codename for 2016.1.18 is _Strebe 1995_.

===== Bug

* Typo in BSFMonitor Documentation (Issue http://issues.opennms.org/browse/NMS-10428[NMS-10428])
* Alarm Dashlet CriteriaBuilder In-Restriction not working (Issue http://issues.opennms.org/browse/NMS-10479[NMS-10479])
* syslog events are creating notifications and disregarding rules in place (Issue http://issues.opennms.org/browse/NMS-10486[NMS-10486])

[releasenotes-changelog-Meridian-2016.1.17]

==== Release Meridian-2016.1.17

Release 2016.1.17 is an update to 2016.1.16 that fixes a bug with long-running PostgreSQL instances, and
makes improvements to VMware connection pooling.

The codename for 2016.1.17 is _Van der Grinten_.

===== Bug

* int overflow in InstallerDb causes bamboo failures (Issue http://issues.opennms.org/browse/NMS-10402[NMS-10402])

===== Enhancement

* Improve concurrency in Vmware Connection Pool (Issue http://issues.opennms.org/browse/NMS-10373[NMS-10373])

[releasenotes-changelog-Meridian-2016.1.16]

==== Release Meridian-2016.1.16

Release 2016.1.16 is an update to 2016.1.15 that adds one small enhancement to the service UI.

The codename for 2016.1.16 is _Equirectangular_.

===== Enhancement

* add polling interval definition on service UI (Issue http://issues.opennms.org/browse/NMS-9747[NMS-9747])
* Release notes in Help / Support links to 2015 (Issue http://issues.opennms.org/browse/LTS-214[LTS-214])

[releasenotes-changelog-Meridian-2016.1.15]

==== Release Meridian-2016.1.15

Release 2016.1.15 is an update to 2016.1.14 that includes a critical fix for RADIUS support and a few other small bug fixes.

The codename for 2016.1.15 is _Peirce Quincuncial_.

===== Breaking Changes

A security issue in the `RadiusAuthenticatinProvider` has been fixed (Issue http://issues.opennms.org/browse/NMS-10212[NMS-10212]).
This requires changes to the `radius.xml` file located in `${OPENNMS_HOME}/jetty-webapps/opennms/WEB-INF/spring-security.d`.
Now instead of providing a bean for the `authTypeClass` property, it is sufficient to just provide the class name:

.Before
[source, xml]
----
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
 xmlns:beans="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
             http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">
 <beans:bean id="externalAuthenticationProvider" class="org.opennms.protocols.radius.springsecurity.RadiusAuthenticationProvider">
   <!-- ... -->
   <beans:property name="authTypeClass"><beans:bean class="net.jradius.client.auth.PAPAuthenticator"/></beans:property>
   <!-- ... -->
 </beans:bean>
</beans:beans>
----

.After
[source, xml]
----
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">
<beans:bean id="externalAuthenticationProvider" class="org.opennms.protocols.radius.springsecurity.RadiusAuthenticationProvider">
  <!-- ... -->
  <beans:property name="authTypeClass" value="net.jradius.client.auth.PAPAuthenticator"/>
  <!-- ... -->
</beans:bean>
</beans:beans>
----

Supported values for `authTypeClass` are:

* net.jradius.client.auth.TunnelAuthenticator
* net.jradius.client.auth.PAPAuthenticator
* net.jradius.client.auth.EAPMSCHAPv2Authenticator
* net.jradius.client.auth.MSCHAPv2Authenticator
* net.jradius.client.auth.EAPMD5Authenticator
* net.jradius.client.auth.CHAPAuthenticator
* net.jradius.client.auth.MSCHAPv1Authenticator
* net.jradius.client.auth.RadiusAuthenticator
* net.jradius.client.auth.EAPAuthenticator

If no value is provided `net.jradius.client.auth.PAPAuthenticator` is used.

===== Bug

* VMWare-Center-Monitoring make for every virtual machine a login/logout (Issue http://issues.opennms.org/browse/NMS-8204[NMS-8204])
* LDAPMonitor causes Errors in ldap logfiles (Issue http://issues.opennms.org/browse/NMS-8891[NMS-8891])
* The KSC Dashlet for the Ops-Board is not working (Issue http://issues.opennms.org/browse/NMS-10191[NMS-10191])
* Radius Login Problem (Issue http://issues.opennms.org/browse/NMS-10212[NMS-10212])
* DefaultProvisionService logs noisily for monitored service having state "N" (Issue http://issues.opennms.org/browse/NMS-10291[NMS-10291])

[releasenotes-changelog-Meridian-2016.1.14]

==== Release Meridian-2016.1.14

Release 2016.1.14 is an update to 2016.1.13 that makes a few small documentation changes, and a fix to the Top 25 event report.

The codename for 2016.1.14 is _Boggs eumorphic_.

===== Bug

* The ReST API used to return XMLs with namespace, and now it doesn't (Issue http://issues.opennms.org/browse/NMS-8524[NMS-8524])
* Event-Analysis Report shows incorrect numbers for big values in Top25 Events (Issue http://issues.opennms.org/browse/NMS-9202[NMS-9202])
* The KSC Dashlet for the Ops-Board is not working (Issue http://issues.opennms.org/browse/NMS-10191[NMS-10191])

===== Enhancement

* Link to privacy policy from Data Choices UI elements (Issue http://issues.opennms.org/browse/NMS-10169[NMS-10169])

[releasenotes-changelog-Meridian-2016.1.13]

==== Release Meridian-2016.1.13

Release 2016.1.13 is an update to 2016.1.12 that provides a few small bug fixes and an update to support Newts cache priming.

The codename for 2016.1.13 is _HEALPix_.

===== Bug

* Cannot see StrafePing graphs when using Backshift. (Issue http://issues.opennms.org/browse/NMS-9946[NMS-9946])
* foreign-id with space (%20) at end causes issues with Newts (Issue http://issues.opennms.org/browse/NMS-9961[NMS-9961])
* Backport intermittent SNMPv3 failures to foundation-2016 (Issue http://issues.opennms.org/browse/NMS-10153[NMS-10153])

===== Enhancement

* Improve performance of newts.indexing to avoid overwhelm Cassandra cluster (Issue http://issues.opennms.org/browse/NMS-9959[NMS-9959])

[releasenotes-changelog-Meridian-2016.1.12]

==== Release Meridian-2016.1.12

Release 2016.1.12 is an update to 2016.1.11 that provides one small bug fix and a Windows build fix.

The codename for 2016.1.12 is _Lambert cylindrical equal-area_.

===== Bug

* EventUtils.eventsMatch() fails if nodeId is greater than 127 (Issue http://issues.opennms.org/browse/NMS-9941[NMS-9941])
* Java not found properly when building from Windows CMD proc (Issue http://issues.opennms.org/browse/NMS-9947[NMS-9947])

[releasenotes-changelog-Meridian-2016.1.11]
==== Release Meridian-2016.1.11

Release 2016.1.11 is an update to 2016.1.10 that provides one small bug fix.

The codename for 2016.1.11 is _Gall-Peters_.

===== Bug

* Inconsistent handling of keyboard navigation on top menu (Issue http://issues.opennms.org/browse/NMS-9867[NMS-9867])
* Copyright dates need a bump for 2018 (Issue http://issues.opennms.org/browse/NMS-9871[NMS-9871])

[releasenotes-changelog-Meridian-2016.1.10]
==== Release Meridian-2016.1.10

Release 2016.1.10 is an update to 2016.1.9 that provides a few bug fixes.

The codename for 2016.1.10 is _Waterman Butterfly_.

===== Bug

* host with single quote in the name breaks UI menu items (Issue http://issues.opennms.org/browse/NMS-6616[NMS-6616])
* IOActive: Reflected Cross-site Scripting in userGroupView/roles roleDescr and Other Parameters (Issue http://issues.opennms.org/browse/NMS-9673[NMS-9673])
* IOActive: Reflected Cross-site Scripting in admin/thresholds/index.htm filterField and Other Parameters (Issue http://issues.opennms.org/browse/NMS-9674[NMS-9674])
* The EXE installer of the remote poller on Windows is not working (Issue http://issues.opennms.org/browse/NMS-9721[NMS-9721])

[releasenotes-changelog-Meridian-2016.1.9]
==== Release Meridian-2016.1.9

Release 2016.1.9 is an update to 2016.1.8 that provides a few bug fixes.

The codename for 2016.1.9 is _Winkel tripel_.

===== Bug

* Tweak Mattermost notification docs not to specify a channel (Issue http://issues.opennms.org/browse/NMS-9362[NMS-9362])
* INFO-level "unable to locate resource" log messages for interfaces not persisted by policy (Issue http://issues.opennms.org/browse/NMS-9388[NMS-9388])
* Northbounders implementation are not sending feedback events for reloadDaemonConfig (Issue http://issues.opennms.org/browse/NMS-9524[NMS-9524])
* XSS: HTML attribute values with quotes not escaped properly (Issue http://issues.opennms.org/browse/NMS-9645[NMS-9645])
* Incorrect logging of exceptions in Slack and Mattermost notifications (Issue http://issues.opennms.org/browse/NMS-9656[NMS-9656])
* IOActive: Reflected Cross-site Scripting in instrumentationLogReader.jsp searchString Parameter (Issue http://issues.opennms.org/browse/NMS-9672[NMS-9672])
* Typo prevents FIQL query values from being URI-encoded (Issue http://issues.opennms.org/browse/NMS-9694[NMS-9694])
* Typo: "not elegible" for SNMP primary N enumeration (Issue http://issues.opennms.org/browse/NMS-9701[NMS-9701])
* ReST v1 does not return errors for unparseable events (Issue http://issues.opennms.org/browse/NMS-9724[NMS-9724])
* Sending bad XML to the Requisitions ReST end point makes the API unusable (Issue http://issues.opennms.org/browse/NMS-9725[NMS-9725])

[releasenotes-changelog-Meridian-2016.1.8]
==== Release Meridian-2016.1.8

Release 2016.1.8 is an update to 2016.1.7 that provides a few security fixes.

The codename for 2016.1.8 is _Hammer retroazimuthal_.

===== Bug

* Multiple XSS vulnerabilities in OpenNMS webapp (Issue http://issues.opennms.org/browse/NMS-9457[NMS-9457])
* opennms-webapp-remoting JARs are not signed (Issue http://issues.opennms.org/browse/NMS-9638[NMS-9638])
* IOActive: Stored Cross-site Scripting in SNMP Trap Message (Issue http://issues.opennms.org/browse/NMS-9668[NMS-9668])
* IOActive: Reflected Cross-site Scripting in heatmap/outages heatmap Parameter (Issue http://issues.opennms.org/browse/NMS-9671[NMS-9671])

[releasenotes-changelog-Meridian-2016.1.7]
==== Release Meridian-2016.1.7

Release 2016.1.7 is an update to 2016.1.6 that provides a number of small bug fixes.

The codename for 2016.1.7 is _Tobler hyperelliptical_.

===== Bug

* INFO-severity syslog-derived events end up unmatched (Issue http://issues.opennms.org/browse/NMS-8106[NMS-8106])
* Resource graph forecast page lacks header (Issue http://issues.opennms.org/browse/NMS-8856[NMS-8856])
* Allow provisiond to perform reverse lookups without requiring an A record (foundation-2016) (Issue http://issues.opennms.org/browse/NMS-9406[NMS-9406])
* No bounds-checking in processing of DHCP Options (Issue http://issues.opennms.org/browse/NMS-9420[NMS-9420])
* The reason parameter for a nodeLostService event is limited to 255 characters (Issue http://issues.opennms.org/browse/NMS-9550[NMS-9550])
* The remote-poller.sh script looks for the remote-poller.jar file in the wrong location (Issue http://issues.opennms.org/browse/NMS-9606[NMS-9606])
* vmware importer fails with NPE (Issue http://issues.opennms.org/browse/NMS-9611[NMS-9611])
* Basic syslog messages with Informational severity turn into unknown events (Issue http://issues.opennms.org/browse/NMS-9615[NMS-9615])
* quick add node is broken (Issue http://issues.opennms.org/browse/NMS-9618[NMS-9618])
* Remote poller logs have place holders for their names (Issue http://issues.opennms.org/browse/NMS-9621[NMS-9621])
* Remote Poller log path incorrect when using the NSIS installer (Issue http://issues.opennms.org/browse/NMS-9631[NMS-9631])

[releasenotes-changelog-Meridian-2016.1.6]
==== Release Meridian-2016.1.6

Release 2016.1.6 is an update to 2016.1.5 that provides quite a few bug fixes and a few small enhancements.

The codename for 2016.1.6 is _Goode homolosine_.

===== Bug

* collectd does not unschedule deleted nodes (Issue http://issues.opennms.org/browse/NMS-5105[NMS-5105])
* noSuchInstance causing problems during provision scan (Issue http://issues.opennms.org/browse/NMS-8046[NMS-8046])
* Security issue for all admin vaadin applications exposed as OSGI Service (Issue http://issues.opennms.org/browse/NMS-8431[NMS-8431])
* Updating assets/categories through ReST affects Forced Unmanaged services. (Issue http://issues.opennms.org/browse/NMS-8879[NMS-8879])
* Logging for TCP output queue (Issue http://issues.opennms.org/browse/NMS-9291[NMS-9291])
* provision.pl does not create interfaces (Issue http://issues.opennms.org/browse/NMS-9345[NMS-9345])
* XSS vulnerability on quick-add node page (Issue http://issues.opennms.org/browse/NMS-9353[NMS-9353])
* XSS vulnerability on node error page (Issue http://issues.opennms.org/browse/NMS-9354[NMS-9354])
* XSS vulnerability with application names (Issue http://issues.opennms.org/browse/NMS-9355[NMS-9355])
* Thresholding on WSMan datasources appears broken (Issue http://issues.opennms.org/browse/NMS-9361[NMS-9361])
* TCP persistence strategy should output time in milliseconds, not seconds (Issue http://issues.opennms.org/browse/NMS-9409[NMS-9409])
* NullPointerException during nodeScan on devices with broken IP-MIB::ipAddressIfIndex (Issue http://issues.opennms.org/browse/NMS-9415[NMS-9415])
* Event Configuration Screen Requires Alarm Type (Issue http://issues.opennms.org/browse/NMS-9422[NMS-9422])
* SQL injection in DefaultSurveillanceViewService (Issue http://issues.opennms.org/browse/NMS-9476[NMS-9476])
* "query" parameter allows SQL injection (Issue http://issues.opennms.org/browse/NMS-9478[NMS-9478])
* Clone foreign source requisition overwrites config of other requisition without any hint or warning (Issue http://issues.opennms.org/browse/NMS-9481[NMS-9481])
* Fix ownership of users.xml (Issue http://issues.opennms.org/browse/NMS-9493[NMS-9493])
* ConcurrentModificationException thrown by Statsd (Issue http://issues.opennms.org/browse/NMS-9511[NMS-9511])
* Update copyright date in docs (Issue http://issues.opennms.org/browse/NMS-9516[NMS-9516])
* Document supported products and versions for Remedy integration (Issue http://issues.opennms.org/browse/NMS-9538[NMS-9538])
* Eventd does not respect event configuration order when reloading (Issue http://issues.opennms.org/browse/NMS-9551[NMS-9551])
* users.xml being overwritten on installation (Issue http://issues.opennms.org/browse/NMS-9573[NMS-9573])

===== Enhancement

* Document the logic behind the response time value reported by the SnmpMonitor (Issue http://issues.opennms.org/browse/NMS-9475[NMS-9475])
* Add parameterized SQL support to Criteria API (Issue http://issues.opennms.org/browse/NMS-9480[NMS-9480])


[releasenotes-changelog-Meridian-2016.1.5]
==== Release Meridian-2016.1.5

Release 2016.1.5 is an update to 2016.1.4 that provides quite a few bug fixes and a few enhancements.

The codename for 2016.1.5 is _Peirce Quincuncial_.

===== Bug

* OpenNMS doesn't correctly support IPv6 addresses for (jasper) reporting (Issue http://issues.opennms.org/browse/NMS-5450[NMS-5450])
* vmware urls do not support username/passwords that require URL encoding (Issue http://issues.opennms.org/browse/NMS-6530[NMS-6530])
* If a target node is rebooted the RRD/JRB files contains spikes because the sysUpTime check is not working (Issue http://issues.opennms.org/browse/NMS-7106[NMS-7106])
* Geo-Maps running on a server without internet connection breaks the UI for valid nodes. (Issue http://issues.opennms.org/browse/NMS-7148[NMS-7148])
* scrollbars displayed for RrdDashlet title box (Issue http://issues.opennms.org/browse/NMS-7562[NMS-7562])
* RWS client always uses plain HTTP, even if rws-config.html has HTTPS URL (Issue http://issues.opennms.org/browse/NMS-8441[NMS-8441])
* Multiple smoke tests flapping inside docker (Issue http://issues.opennms.org/browse/NMS-8544[NMS-8544])
* Restarting OMNS results in numerous SNMP outage alarms and notifications (Issue http://issues.opennms.org/browse/NMS-8620[NMS-8620])
* Null ospfrouterid in NodeDiscoveryOspf (Issue http://issues.opennms.org/browse/NMS-8667[NMS-8667])
* Exception in LatencyStoringServiceMonitorAdaptor: IncorrectResultSizeDataAccessException (Issue http://issues.opennms.org/browse/NMS-8756[NMS-8756])
* Threshold editor help text unclear about comparison operators (Issue http://issues.opennms.org/browse/NMS-8826[NMS-8826])
* NPE in CdpLink.toString() (Issue http://issues.opennms.org/browse/NMS-8897[NMS-8897])
* auto-acknoledge random fails (Issue http://issues.opennms.org/browse/NMS-8901[NMS-8901])
* Near Real-Time Graphing unable to graph Cisco BDI interfaces (Issue http://issues.opennms.org/browse/NMS-8908[NMS-8908])
* WS-Man throws event 4776 and 4625 with domain user on windows side (Issue http://issues.opennms.org/browse/NMS-8925[NMS-8925])
* NPE in IpInterfaceScan when processing IPLike rule with IPv6 address (Issue http://issues.opennms.org/browse/NMS-8934[NMS-8934])
* Statsd: erroneous reporting; aggregators not reset between worker's runs (Issue http://issues.opennms.org/browse/NMS-8944[NMS-8944])
* WS_Man datacollection using WQL fails with 'unsupported element' (Issue http://issues.opennms.org/browse/NMS-8955[NMS-8955])
* Enlinkd fails to discovery Bridge Topology (Issue http://issues.opennms.org/browse/NMS-8973[NMS-8973])
* Typo in linkednode.jsp in panel title (Issue http://issues.opennms.org/browse/NMS-8981[NMS-8981])
* NRT Graphing does not show SNMP counter values correctly (Issue http://issues.opennms.org/browse/NMS-9005[NMS-9005])
* Copyright bump 2017 (Issue http://issues.opennms.org/browse/NMS-9060[NMS-9060])
* opennms.conf can break the snmp-request command (Issue http://issues.opennms.org/browse/NMS-9068[NMS-9068])
* Jsr160ConnectionFactory doesn't work with IPv6 address (Issue http://issues.opennms.org/browse/NMS-9071[NMS-9071])
* WS-Man thresholding reports: No thresholds configured for resource type '*' (Issue http://issues.opennms.org/browse/NMS-9077[NMS-9077])
* Standalone HTTPS with Jetty doesn't work with certificate alias (Issue http://issues.opennms.org/browse/NMS-9084[NMS-9084])
* Correlation engine's cancelTimer method should be public (Issue http://issues.opennms.org/browse/NMS-9087[NMS-9087])
* Collection timing enhancements (Issue http://issues.opennms.org/browse/NMS-9090[NMS-9090])
* Migrate RTC related objects to JAXB instead of Castor (Issue http://issues.opennms.org/browse/NMS-9100[NMS-9100])
* Pollerd continues to monitor deleted nodes (Issue http://issues.opennms.org/browse/NMS-9112[NMS-9112])
* Selection of non-disk RRD strategies (Issue http://issues.opennms.org/browse/NMS-9120[NMS-9120])
* It is possible to perform alarms/notifications actions through the Acks ReST end point without permissions (Issue http://issues.opennms.org/browse/NMS-9140[NMS-9140])
* SNMP client code can get stuck in infinite retry loops (Issue http://issues.opennms.org/browse/NMS-9164[NMS-9164])
* incorrect permissions on opennms.service (Issue http://issues.opennms.org/browse/NMS-9166[NMS-9166])
* Fix the execution of Drools rules when using streaming (CEP, Temporal Reasoning) (Issue http://issues.opennms.org/browse/NMS-9172[NMS-9172])
* Drools examples fails to load with exception (Issue http://issues.opennms.org/browse/NMS-9186[NMS-9186])
* SyslogParser should not assume UTC timestamps (Issue http://issues.opennms.org/browse/NMS-9201[NMS-9201])
* New resource types are not available in the Web UI until it is restarted (Issue http://issues.opennms.org/browse/NMS-9205[NMS-9205])
* OSPF Router Id not properly updated (Issue http://issues.opennms.org/browse/NMS-9218[NMS-9218])
* DNS Adapter on Delete Node does not delete DNS record (Issue http://issues.opennms.org/browse/NMS-9219[NMS-9219])
* Problems associated with SNMP4J affects OpenNMS performance (contention issues) (Issue http://issues.opennms.org/browse/NMS-9223[NMS-9223])
* Pollerd takes too much time scheduling polling when OpenNMS starts (Issue http://issues.opennms.org/browse/NMS-9247[NMS-9247])
* Requisition UI breaks when percentage sign is used inside Foreign ID input field (Issue http://issues.opennms.org/browse/NMS-9269[NMS-9269])
* Make TCP output queue parameters configurable (Issue http://issues.opennms.org/browse/NMS-9282[NMS-9282])
* Calculation of KSC reports timespans "Last Week" and "This Week" broken (Issue http://issues.opennms.org/browse/NMS-9325[NMS-9325])

===== Enhancement

* Upgrade Drools to 6.4.0.Final (from 6.0.1.Final) (Issue http://issues.opennms.org/browse/NMS-8676[NMS-8676])
* Node detail page is hard to use with a lot of surveillance categories (Issue http://issues.opennms.org/browse/NMS-8989[NMS-8989])
* SNMP data collection definitions for Cisco ASA5585-SSP-60 devices (Issue http://issues.opennms.org/browse/NMS-9094[NMS-9094])
* Persist string attributes over the TCP stream (Issue http://issues.opennms.org/browse/NMS-9126[NMS-9126])
* Add JMX instrumentation for the Drools Correlator to understand the the working memory of each rule-set (a.k.a. engine) (Issue http://issues.opennms.org/browse/NMS-9145[NMS-9145])
* Upgrade snmp4j to 2.5.5 (Issue http://issues.opennms.org/browse/NMS-9162[NMS-9162])
* Enhance to MockSnmpAgent to support returning arbitrary SNMP error codes (Issue http://issues.opennms.org/browse/NMS-9163[NMS-9163])
* Set domain level for DNS adapter (Issue http://issues.opennms.org/browse/NMS-9222[NMS-9222])
* Allow for choosing ifDescr over ifName for interface directory name (Issue http://issues.opennms.org/browse/NMS-9240[NMS-9240])
* Improve handling of counter wraps/reset when using Newts (Issue http://issues.opennms.org/browse/NMS-9252[NMS-9252])

[releasenotes-changelog-2016.1.4]
==== Release Meridian-2016.1.4

Release 2016.1.4 is an update to 2016.1.3 that provides a number of bug fixes and a few enhancements.

The codename for 2016.1.4 is _Dymaxion_.

===== NOTE: Configuration Changes

While we strive to make no changes to `$OPENNMS_HOME/etc` in micro Meridian releases, we have a few changes that we deemed important or low-impact enough for this release:

* An entry was added to `log4j2.xml` for SNMP4J, avoiding large amounts of spurious SNMP logs.
* The Peak Traffic Jasper subreport was modified to report in octets.
* A number of graph definitions in `snmp-graph.properties.d` were fixed.

===== Bug

* If a target node is rebooted the RRD/JRB files contains spikes because the sysUpTime check is not working (Issue http://issues.opennms.org/browse/NMS-7106[NMS-7106])
* Opsboard change title color to something neutral than red (Issue http://issues.opennms.org/browse/NMS-7911[NMS-7911])
* ConstraintViolationException in Enlinkd for OSPF (Issue http://issues.opennms.org/browse/NMS-8067[NMS-8067])
* Enlinkd Topology: Cannot search for nodes without alarms (Issue http://issues.opennms.org/browse/NMS-8420[NMS-8420])
* Replace VDEF with {diffTime} on the resource templates to avoid conflicts with Backshift (Issue http://issues.opennms.org/browse/NMS-8490[NMS-8490])
* Inconsistencies with the Measurements API when using Newts (Issue http://issues.opennms.org/browse/NMS-8498[NMS-8498])
* Restarting OMNS results in numerous SNMP outage alarms and notifications (Issue http://issues.opennms.org/browse/NMS-8620[NMS-8620])
* Measurements API can fail with exception when operating in relaxed mode (Issue http://issues.opennms.org/browse/NMS-8665[NMS-8665])
* Newts: When Cassandra Cluster is unavailable, OpenNMS gives up on trying to contact it again (Issue http://issues.opennms.org/browse/NMS-8670[NMS-8670])
* Any SNMP error-status > 5 treated as unrecognized, aborts AggregateTracker (Issue http://issues.opennms.org/browse/NMS-8671[NMS-8671])
* Event advanced search does not work because of encoded &s (Issue http://issues.opennms.org/browse/NMS-8768[NMS-8768])
* The Alarms Details widget on the OpsBoard shows the text on green instead of black (Issue http://issues.opennms.org/browse/NMS-8771[NMS-8771])
* Installer script doesn't work with PostgreSQL 9.6 (Issue http://issues.opennms.org/browse/NMS-8779[NMS-8779])
* SNMP web configurator does not allow zero retries (Issue http://issues.opennms.org/browse/NMS-8789[NMS-8789])
* The search page for events is not working as expected (Issue http://issues.opennms.org/browse/NMS-8790[NMS-8790])
* InterruptedExceptions thrown when using SNMP (Issue http://issues.opennms.org/browse/NMS-8813[NMS-8813])
* Outage ReST service forNode use case calculates dates incorrectly (Issue http://issues.opennms.org/browse/NMS-8823[NMS-8823])
* Discovery duplicates nodes when foreign-source is set (Issue http://issues.opennms.org/browse/NMS-8835[NMS-8835])
* Several ICMPv6 tests fail with NoRouteToHostException (Issue http://issues.opennms.org/browse/NMS-8840[NMS-8840])
* user detection in `install` is busted on some Linux systems (Issue http://issues.opennms.org/browse/NMS-8843[NMS-8843])
* Backshift shows the name of the string variables when the value is not available (Issue http://issues.opennms.org/browse/NMS-8847[NMS-8847])
* Wallboard / Ops board renders product logo strangely (Issue http://issues.opennms.org/browse/NMS-8855[NMS-8855])
* NonUniqueResultException when retrieving CDP links (Issue http://issues.opennms.org/browse/NMS-8863[NMS-8863])
* The ipinterface.iphostname field is not updated after changing the FQDN associated with a given IP address (Issue http://issues.opennms.org/browse/NMS-8874[NMS-8874])
* The label of unreachable auto-discovered nodes is set to the IP after a rescan. (Issue http://issues.opennms.org/browse/NMS-8880[NMS-8880])
* Memory Leak in enlinkd? (Issue http://issues.opennms.org/browse/NMS-8896[NMS-8896])
* Spurious Trapd error logs: unknown SNMP protocol version 'v2' (Issue http://issues.opennms.org/browse/NMS-8900[NMS-8900])
* Can't save cached requisition associated with HTTP when scheduling the import through provisiond-configuration.xml (Issue http://issues.opennms.org/browse/NMS-8912[NMS-8912])
* ArrayIndexOutOfBoundsException while processing some trap varbinds (Issue http://issues.opennms.org/browse/NMS-8915[NMS-8915])
* WS-Man collection fail with unknown reason code 2 (Issue http://issues.opennms.org/browse/NMS-8923[NMS-8923])
* WS-Man collection with resource-type only store last resource (Issue http://issues.opennms.org/browse/NMS-8924[NMS-8924])
* Backshift failing with legend errors for NRTG + Forecasts (Issue http://issues.opennms.org/browse/NMS-8939[NMS-8939])
* wsdl2java in features/ticketing/remedy is causing build failures (Issue http://issues.opennms.org/browse/NMS-8940[NMS-8940])
* WS_Man datacollection using WQL fails with 'unsupported element' (Issue http://issues.opennms.org/browse/NMS-8955[NMS-8955])

===== Enhancement

* Replace the X with back button in the Angular provisioning WebUI  (Issue http://issues.opennms.org/browse/NMS-7908[NMS-7908])
* Missing image in provisioning doc (Issue http://issues.opennms.org/browse/NMS-8121[NMS-8121])
* Add ReST Elastic Search Alarms to Foundation2016 (Issue http://issues.opennms.org/browse/NMS-8693[NMS-8693])
* Create a more useful example content for opennms.conf (Issue http://issues.opennms.org/browse/NMS-8721[NMS-8721])
* Add documentation for Mattermost/Slack notifications (Issue http://issues.opennms.org/browse/NMS-8742[NMS-8742])
* Allow filtering by severity in alarm list (Issue http://issues.opennms.org/browse/NMS-8851[NMS-8851])
* Expose alarm-list "limit" parameter as a UI control (Issue http://issues.opennms.org/browse/NMS-8852[NMS-8852])
* Make the ILR put the node label alongside the package/IPADDR/Service tuple (Issue http://issues.opennms.org/browse/NMS-8858[NMS-8858])
* Better logging for SNMP traps with processing problems (Issue http://issues.opennms.org/browse/NMS-8903[NMS-8903])
* Make the RRAs tunable for the metrics:stress command when using for RRDtool. (Issue http://issues.opennms.org/browse/NMS-8972[NMS-8972])


[releasenotes-changelog-2016.1.3]
==== Release Meridian-2016.1.3

Release 2016.1.3 is an update to 2016.1.2 that provides a few bug fixes, including a fix to a XSS vulnerability in the web UI.

The codename for 2016.1.3 is _Hobo-Dyer_.

===== Bug

* Syslogd may not associate messages with new nodes without a restart (Issue http://issues.opennms.org/browse/NMS-7236[NMS-7236])
* No event for Informational syslog (Issue http://issues.opennms.org/browse/NMS-7934[NMS-7934])
* IE11 and Firefox Browsers Display Double Scroll Bars for the RTC: Service Monitoring Table in the Ops Panel (Issue http://issues.opennms.org/browse/NMS-8035[NMS-8035])
* Null Pointer Exception in bridge discovery (Issue http://issues.opennms.org/browse/NMS-8390[NMS-8390])
* upgrade error: too many open files (Issue http://issues.opennms.org/browse/NMS-8507[NMS-8507])
* Documentation for the Requisition ReST API is confusing (Issue http://issues.opennms.org/browse/NMS-8521[NMS-8521])
* Missing documentation for ifservices ReST end point. (Issue http://issues.opennms.org/browse/NMS-8604[NMS-8604])
* Lost Bridge Forwarding Table Links (Issue http://issues.opennms.org/browse/NMS-8619[NMS-8619])
* Missing documentation for categories ReST end point. (Issue http://issues.opennms.org/browse/NMS-8629[NMS-8629])
* The categories ReST end point returns HTTP 500 when querying it with a browser. (Issue http://issues.opennms.org/browse/NMS-8637[NMS-8637])
* Database Reports Are Emailed When "Email report" is Unchecked (Issue http://issues.opennms.org/browse/NMS-8654[NMS-8654])
* Custom Resource graphs draw magenta lines if "Blue" is selected (Issue http://issues.opennms.org/browse/NMS-8655[NMS-8655])
* The ReST end point /foreignSourcesConfig/assets contains invalid fields (Issue http://issues.opennms.org/browse/NMS-8690[NMS-8690])
* Site status view gives a 400 error for aggregate view for node downs (Issue http://issues.opennms.org/browse/NMS-8700[NMS-8700])
* View current Site outages does not filter for "building" (Issue http://issues.opennms.org/browse/NMS-8702[NMS-8702])
* The Vaddin version of the dashboard shows negative availability sometimes (Issue http://issues.opennms.org/browse/NMS-8705[NMS-8705])
* Scriptd is not working at all for events that have nodes associated. (Issue http://issues.opennms.org/browse/NMS-8716[NMS-8716])
* vmwarecimquery and vmwareconfigbuilder tools is not working (Issue http://issues.opennms.org/browse/NMS-8718[NMS-8718])
* XSS vulnerability in display of SNMP sysName and trap varbind values (Issue http://issues.opennms.org/browse/NMS-8722[NMS-8722])
* IllegalStateException when using the RrdSummaryController (Issue http://issues.opennms.org/browse/NMS-8743[NMS-8743])
* Trapd JMX trap counters don't count traps (Issue http://issues.opennms.org/browse/NMS-8744[NMS-8744])
* Blank content when clicking on "View Node Link Detailed Info" (Issue http://issues.opennms.org/browse/NMS-8808[NMS-8808])
* Search Events Error (Issue http://issues.opennms.org/browse/NMS-8970[NMS-8970])

===== Enhancement

* Add Mattermost and Slack notification strategies (Issue http://issues.opennms.org/browse/NMS-8346[NMS-8346])
* Outage REST service cannot filter on event fields (Issue http://issues.opennms.org/browse/NMS-8724[NMS-8724])


[releasenotes-changelog-2016.1.2]
==== Release Meridian-2016.1.2

Release 2016.1.2 is an update to 2016.1.1 that provides a number of bug fixes, including a fix for geographical maps that were using the (end-of-life'd) MapQuest OpenStreetMap tile server.

The codename for 2016.1.2 is _Loximuthal_.

===== Bug

* observations related to "ping".option in topology page (Issue http://issues.opennms.org/browse/NMS-6849[NMS-6849])
* Using ping in topology view cause strange behavior (Issue http://issues.opennms.org/browse/NMS-7204[NMS-7204])
* New Monitoring Locations Editor only allows integers in the latitude and longitude fields (Issue http://issues.opennms.org/browse/NMS-7869[NMS-7869])
* output.log fills up with GLib-GObject-CRITICAL messages (Issue http://issues.opennms.org/browse/NMS-8016[NMS-8016])
* Ping from topology view does not work (results in 404 Page not found) (Issue http://issues.opennms.org/browse/NMS-8043[NMS-8043])
* VMware-ManagedEntity does not work with VMware 6 (Issue http://issues.opennms.org/browse/NMS-8187[NMS-8187])
* Install -dis on "SocketException:Too many open files" on centos:latest docker  (Issue http://issues.opennms.org/browse/NMS-8200[NMS-8200])
* JdbcCollector does not close database connections correctly (Issue http://issues.opennms.org/browse/NMS-8488[NMS-8488])
* HW ENTITY_MIB plugin is not showing all information for certain devices (Issue http://issues.opennms.org/browse/NMS-8506[NMS-8506])
* OEM graph for Storage Utilization fails due to '::' (Issue http://issues.opennms.org/browse/NMS-8519[NMS-8519])
* Topology Map is very very slow (Issue http://issues.opennms.org/browse/NMS-8589[NMS-8589])
* Requisitioned IP interfaces never have ipHostName set (Issue http://issues.opennms.org/browse/NMS-8593[NMS-8593])
* Compiler warnings about MaxPermSize support is removed in 8.0 (Issue http://issues.opennms.org/browse/NMS-8594[NMS-8594])

===== Configuration

* Distributed/Geographical Maps do not show images anymore (Issue http://issues.opennms.org/browse/NMS-8597[NMS-8597])

===== Enhancement

* Improve built-in Newts graphs for easier diagnostics (Issue http://issues.opennms.org/browse/NMS-8495[NMS-8495])
* Alphabetize nodes in surveillance category listing (Issue http://issues.opennms.org/browse/NMS-8535[NMS-8535])
* Make custom event parameters expandable (Issue http://issues.opennms.org/browse/NMS-8590[NMS-8590])


[releasenotes-changelog-2016.1.1]
==== Release Meridian-2016.1.1

Release 2016.1.1 is an update to 2016.1.0 that provides a fix for upgrades.

The codename for 2016.1.1 is _Cassini_.


[releasenotes-changelog-2016.1.0]
==== Release Meridian-2016.1.0

Release 2016.1.0 is the first release of OpenNMS Meridian 2016.  It is based on OpenNMS Horizon 17.1.1, plus a number of smaller bug fixes.

The codename for 2016.1.0 is _Mercator_.
